   1               		.file	"mousekey.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.text
   8               	.Ltext0:
   9               		.cfi_sections	.debug_frame
  10               		.section	.text.move_unit,"ax",@progbits
  12               	move_unit:
  13               	.LFB100:
  14               		.file 1 "./tmk_core/common/mousekey.c"
   1:./tmk_core/common/mousekey.c **** /*
   2:./tmk_core/common/mousekey.c **** Copyright 2011 Jun Wako <wakojun@gmail.com>
   3:./tmk_core/common/mousekey.c **** 
   4:./tmk_core/common/mousekey.c **** This program is free software: you can redistribute it and/or modify
   5:./tmk_core/common/mousekey.c **** it under the terms of the GNU General Public License as published by
   6:./tmk_core/common/mousekey.c **** the Free Software Foundation, either version 2 of the License, or
   7:./tmk_core/common/mousekey.c **** (at your option) any later version.
   8:./tmk_core/common/mousekey.c **** 
   9:./tmk_core/common/mousekey.c **** This program is distributed in the hope that it will be useful,
  10:./tmk_core/common/mousekey.c **** but WITHOUT ANY WARRANTY; without even the implied warranty of
  11:./tmk_core/common/mousekey.c **** MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  12:./tmk_core/common/mousekey.c **** GNU General Public License for more details.
  13:./tmk_core/common/mousekey.c **** 
  14:./tmk_core/common/mousekey.c **** You should have received a copy of the GNU General Public License
  15:./tmk_core/common/mousekey.c **** along with this program.  If not, see <http://www.gnu.org/licenses/>.
  16:./tmk_core/common/mousekey.c **** */
  17:./tmk_core/common/mousekey.c **** 
  18:./tmk_core/common/mousekey.c **** #include <stdint.h>
  19:./tmk_core/common/mousekey.c **** #include "keycode.h"
  20:./tmk_core/common/mousekey.c **** #include "host.h"
  21:./tmk_core/common/mousekey.c **** #include "timer.h"
  22:./tmk_core/common/mousekey.c **** #include "print.h"
  23:./tmk_core/common/mousekey.c **** #include "debug.h"
  24:./tmk_core/common/mousekey.c **** #include "mousekey.h"
  25:./tmk_core/common/mousekey.c **** 
  26:./tmk_core/common/mousekey.c **** 
  27:./tmk_core/common/mousekey.c **** 
  28:./tmk_core/common/mousekey.c **** static report_mouse_t mouse_report = {};
  29:./tmk_core/common/mousekey.c **** static uint8_t mousekey_repeat =  0;
  30:./tmk_core/common/mousekey.c **** static uint8_t mousekey_accel = 0;
  31:./tmk_core/common/mousekey.c **** 
  32:./tmk_core/common/mousekey.c **** static void mousekey_debug(void);
  33:./tmk_core/common/mousekey.c **** 
  34:./tmk_core/common/mousekey.c **** 
  35:./tmk_core/common/mousekey.c **** /*
  36:./tmk_core/common/mousekey.c ****  * Mouse keys  acceleration algorithm
  37:./tmk_core/common/mousekey.c ****  *  http://en.wikipedia.org/wiki/Mouse_keys
  38:./tmk_core/common/mousekey.c ****  *
  39:./tmk_core/common/mousekey.c ****  *  speed = delta * max_speed * (repeat / time_to_max)**((1000+curve)/1000)
  40:./tmk_core/common/mousekey.c ****  */
  41:./tmk_core/common/mousekey.c **** /* milliseconds between the initial key press and first repeated motion event (0-2550) */
  42:./tmk_core/common/mousekey.c **** uint8_t mk_delay = MOUSEKEY_DELAY/10;
  43:./tmk_core/common/mousekey.c **** /* milliseconds between repeated motion events (0-255) */
  44:./tmk_core/common/mousekey.c **** uint8_t mk_interval = MOUSEKEY_INTERVAL;
  45:./tmk_core/common/mousekey.c **** /* steady speed (in action_delta units) applied each event (0-255) */
  46:./tmk_core/common/mousekey.c **** uint8_t mk_max_speed = MOUSEKEY_MAX_SPEED;
  47:./tmk_core/common/mousekey.c **** /* number of events (count) accelerating to steady speed (0-255) */
  48:./tmk_core/common/mousekey.c **** uint8_t mk_time_to_max = MOUSEKEY_TIME_TO_MAX;
  49:./tmk_core/common/mousekey.c **** /* ramp used to reach maximum pointer speed (NOT SUPPORTED) */
  50:./tmk_core/common/mousekey.c **** //int8_t mk_curve = 0;
  51:./tmk_core/common/mousekey.c **** /* wheel params */
  52:./tmk_core/common/mousekey.c **** uint8_t mk_wheel_max_speed = MOUSEKEY_WHEEL_MAX_SPEED;
  53:./tmk_core/common/mousekey.c **** uint8_t mk_wheel_time_to_max = MOUSEKEY_WHEEL_TIME_TO_MAX;
  54:./tmk_core/common/mousekey.c **** 
  55:./tmk_core/common/mousekey.c **** 
  56:./tmk_core/common/mousekey.c **** static uint16_t last_timer = 0;
  57:./tmk_core/common/mousekey.c **** 
  58:./tmk_core/common/mousekey.c **** 
  59:./tmk_core/common/mousekey.c **** static uint8_t move_unit(void)
  60:./tmk_core/common/mousekey.c **** {
  15               		.loc 1 60 0
  16               		.cfi_startproc
  17               	/* prologue: function */
  18               	/* frame size = 0 */
  19               	/* stack size = 0 */
  20               	.L__stack_usage = 0
  61:./tmk_core/common/mousekey.c ****     uint16_t unit;
  62:./tmk_core/common/mousekey.c ****     if (mousekey_accel & (1<<0)) {
  21               		.loc 1 62 0
  22 0000 8091 0000 		lds r24,mousekey_accel
  23 0004 80FF      		sbrs r24,0
  24 0006 00C0      		rjmp .L2
  63:./tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_MOVE_DELTA * mk_max_speed)/4;
  25               		.loc 1 63 0
  26 0008 6091 0000 		lds r22,mk_max_speed
  27 000c 85E0      		ldi r24,lo8(5)
  28 000e 689F      		mul r22,r24
  29 0010 B001      		movw r22,r0
  30 0012 1124      		clr __zero_reg__
  31 0014 7595      		asr r23
  32 0016 6795      		ror r22
  33 0018 7595      		asr r23
  34 001a 6795      		ror r22
  35               	.LVL0:
  36 001c 00C0      		rjmp .L3
  37               	.LVL1:
  38               	.L2:
  64:./tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1<<1)) {
  39               		.loc 1 64 0
  40 001e 81FF      		sbrs r24,1
  41 0020 00C0      		rjmp .L4
  65:./tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_MOVE_DELTA * mk_max_speed)/2;
  42               		.loc 1 65 0
  43 0022 6091 0000 		lds r22,mk_max_speed
  44 0026 85E0      		ldi r24,lo8(5)
  45 0028 689F      		mul r22,r24
  46 002a B001      		movw r22,r0
  47 002c 1124      		clr __zero_reg__
  48 002e 7595      		asr r23
  49 0030 6795      		ror r22
  50               	.LVL2:
  51 0032 00C0      		rjmp .L3
  52               	.LVL3:
  53               	.L4:
  66:./tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1<<2)) {
  54               		.loc 1 66 0
  55 0034 82FF      		sbrs r24,2
  56 0036 00C0      		rjmp .L5
  57               	.L7:
  67:./tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_MOVE_DELTA * mk_max_speed);
  58               		.loc 1 67 0
  59 0038 6091 0000 		lds r22,mk_max_speed
  60 003c 85E0      		ldi r24,lo8(5)
  61 003e 689F      		mul r22,r24
  62 0040 B001      		movw r22,r0
  63 0042 1124      		clr __zero_reg__
  64               	.LVL4:
  65 0044 00C0      		rjmp .L3
  66               	.LVL5:
  67               	.L5:
  68:./tmk_core/common/mousekey.c ****     } else if (mousekey_repeat == 0) {
  68               		.loc 1 68 0
  69 0046 4091 0000 		lds r20,mousekey_repeat
  70 004a 4423      		tst r20
  71 004c 01F0      		breq .L9
  69:./tmk_core/common/mousekey.c ****         unit = MOUSEKEY_MOVE_DELTA;
  70:./tmk_core/common/mousekey.c ****     } else if (mousekey_repeat >= mk_time_to_max) {
  72               		.loc 1 70 0
  73 004e 6091 0000 		lds r22,mk_time_to_max
  74 0052 4617      		cp r20,r22
  75 0054 00F4      		brsh .L7
  71:./tmk_core/common/mousekey.c ****         unit = MOUSEKEY_MOVE_DELTA * mk_max_speed;
  72:./tmk_core/common/mousekey.c ****     } else {
  73:./tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_MOVE_DELTA * mk_max_speed * mousekey_repeat) / mk_time_to_max;
  76               		.loc 1 73 0
  77 0056 2091 0000 		lds r18,mk_max_speed
  78 005a 85E0      		ldi r24,lo8(5)
  79 005c 289F      		mul r18,r24
  80 005e 9001      		movw r18,r0
  81 0060 1124      		clr __zero_reg__
  82 0062 429F      		mul r20,r18
  83 0064 C001      		movw r24,r0
  84 0066 439F      		mul r20,r19
  85 0068 900D      		add r25,r0
  86 006a 1124      		clr __zero_reg__
  87 006c 70E0      		ldi r23,0
  88 006e 0E94 0000 		call __divmodhi4
  89               	.LVL6:
  90               	.L3:
  74:./tmk_core/common/mousekey.c ****     }
  75:./tmk_core/common/mousekey.c ****     return (unit > MOUSEKEY_MOVE_MAX ? MOUSEKEY_MOVE_MAX : (unit == 0 ? 1 : unit));
  91               		.loc 1 75 0
  92 0072 6038      		cpi r22,-128
  93 0074 7105      		cpc r23,__zero_reg__
  94 0076 00F4      		brsh .L10
  95               		.loc 1 75 0 is_stmt 0 discriminator 1
  96 0078 6115      		cp r22,__zero_reg__
  97 007a 7105      		cpc r23,__zero_reg__
  98 007c 01F0      		breq .L11
  99 007e 00C0      		rjmp .L6
 100               	.LVL7:
 101               	.L9:
  69:./tmk_core/common/mousekey.c ****     } else if (mousekey_repeat >= mk_time_to_max) {
 102               		.loc 1 69 0 is_stmt 1
 103 0080 65E0      		ldi r22,lo8(5)
 104 0082 70E0      		ldi r23,0
 105               	.L6:
 106               		.loc 1 75 0 discriminator 3
 107 0084 862F      		mov r24,r22
 108 0086 0895      		ret
 109               	.LVL8:
 110               	.L10:
 111               		.loc 1 75 0 is_stmt 0
 112 0088 8FE7      		ldi r24,lo8(127)
 113 008a 0895      		ret
 114               	.L11:
 115 008c 81E0      		ldi r24,lo8(1)
  76:./tmk_core/common/mousekey.c **** }
 116               		.loc 1 76 0 is_stmt 1
 117 008e 0895      		ret
 118               		.cfi_endproc
 119               	.LFE100:
 121               		.section	.text.wheel_unit,"ax",@progbits
 123               	wheel_unit:
 124               	.LFB101:
  77:./tmk_core/common/mousekey.c **** 
  78:./tmk_core/common/mousekey.c **** static uint8_t wheel_unit(void)
  79:./tmk_core/common/mousekey.c **** {
 125               		.loc 1 79 0
 126               		.cfi_startproc
 127               	/* prologue: function */
 128               	/* frame size = 0 */
 129               	/* stack size = 0 */
 130               	.L__stack_usage = 0
  80:./tmk_core/common/mousekey.c ****     uint16_t unit;
  81:./tmk_core/common/mousekey.c ****     if (mousekey_accel & (1<<0)) {
 131               		.loc 1 81 0
 132 0000 8091 0000 		lds r24,mousekey_accel
 133 0004 80FF      		sbrs r24,0
 134 0006 00C0      		rjmp .L14
  82:./tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed)/4;
 135               		.loc 1 82 0
 136 0008 6091 0000 		lds r22,mk_wheel_max_speed
 137 000c 70E0      		ldi r23,0
 138 000e 7595      		asr r23
 139 0010 6795      		ror r22
 140 0012 7595      		asr r23
 141 0014 6795      		ror r22
 142               	.LVL9:
 143 0016 00C0      		rjmp .L21
 144               	.LVL10:
 145               	.L14:
  83:./tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1<<1)) {
 146               		.loc 1 83 0
 147 0018 81FF      		sbrs r24,1
 148 001a 00C0      		rjmp .L16
  84:./tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed)/2;
 149               		.loc 1 84 0
 150 001c 6091 0000 		lds r22,mk_wheel_max_speed
 151 0020 70E0      		ldi r23,0
 152 0022 7595      		asr r23
 153 0024 6795      		ror r22
 154               	.LVL11:
 155 0026 00C0      		rjmp .L21
 156               	.LVL12:
 157               	.L16:
  85:./tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1<<2)) {
 158               		.loc 1 85 0
 159 0028 82FF      		sbrs r24,2
 160 002a 00C0      		rjmp .L17
 161               	.L19:
  86:./tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed);
 162               		.loc 1 86 0
 163 002c 6091 0000 		lds r22,mk_wheel_max_speed
 164 0030 70E0      		ldi r23,0
 165               	.LVL13:
 166 0032 00C0      		rjmp .L18
 167               	.LVL14:
 168               	.L17:
  87:./tmk_core/common/mousekey.c ****     } else if (mousekey_repeat == 0) {
 169               		.loc 1 87 0
 170 0034 8091 0000 		lds r24,mousekey_repeat
 171 0038 8823      		tst r24
 172 003a 01F0      		breq .L22
  88:./tmk_core/common/mousekey.c ****         unit = MOUSEKEY_WHEEL_DELTA;
  89:./tmk_core/common/mousekey.c ****     } else if (mousekey_repeat >= mk_wheel_time_to_max) {
 173               		.loc 1 89 0
 174 003c 6091 0000 		lds r22,mk_wheel_time_to_max
 175 0040 8617      		cp r24,r22
 176 0042 00F4      		brsh .L19
  90:./tmk_core/common/mousekey.c ****         unit = MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed;
  91:./tmk_core/common/mousekey.c ****     } else {
  92:./tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed * mousekey_repeat) / mk_wheel_time_to_max
 177               		.loc 1 92 0
 178 0044 9091 0000 		lds r25,mk_wheel_max_speed
 179 0048 989F      		mul r25,r24
 180 004a C001      		movw r24,r0
 181 004c 1124      		clr __zero_reg__
 182 004e 70E0      		ldi r23,0
 183 0050 0E94 0000 		call __divmodhi4
 184               	.LVL15:
 185               	.L18:
  93:./tmk_core/common/mousekey.c ****     }
  94:./tmk_core/common/mousekey.c ****     return (unit > MOUSEKEY_WHEEL_MAX ? MOUSEKEY_WHEEL_MAX : (unit == 0 ? 1 : unit));
 186               		.loc 1 94 0
 187 0054 6038      		cpi r22,-128
 188 0056 7105      		cpc r23,__zero_reg__
 189 0058 00F4      		brsh .L23
 190               	.LVL16:
 191               	.L21:
 192               		.loc 1 94 0 is_stmt 0 discriminator 1
 193 005a 6115      		cp r22,__zero_reg__
 194 005c 7105      		cpc r23,__zero_reg__
 195 005e 01F0      		breq .L24
 196               		.loc 1 94 0 discriminator 3
 197 0060 862F      		mov r24,r22
 198 0062 0895      		ret
 199               	.L23:
 200               		.loc 1 94 0
 201 0064 8FE7      		ldi r24,lo8(127)
 202 0066 0895      		ret
 203               	.L24:
 204 0068 81E0      		ldi r24,lo8(1)
 205 006a 0895      		ret
 206               	.LVL17:
 207               	.L22:
  88:./tmk_core/common/mousekey.c ****     } else if (mousekey_repeat >= mk_wheel_time_to_max) {
 208               		.loc 1 88 0 is_stmt 1
 209 006c 61E0      		ldi r22,lo8(1)
 210 006e 70E0      		ldi r23,0
 211               	.LVL18:
 212 0070 00C0      		rjmp .L21
 213               		.cfi_endproc
 214               	.LFE101:
 216               		.section	.text.mousekey_on,"ax",@progbits
 217               	.global	mousekey_on
 219               	mousekey_on:
 220               	.LFB103:
  95:./tmk_core/common/mousekey.c **** }
  96:./tmk_core/common/mousekey.c **** 
  97:./tmk_core/common/mousekey.c **** void mousekey_task(void)
  98:./tmk_core/common/mousekey.c **** {
  99:./tmk_core/common/mousekey.c ****     if (timer_elapsed(last_timer) < (mousekey_repeat ? mk_interval : mk_delay*10))
 100:./tmk_core/common/mousekey.c ****         return;
 101:./tmk_core/common/mousekey.c **** 
 102:./tmk_core/common/mousekey.c ****     if (mouse_report.x == 0 && mouse_report.y == 0 && mouse_report.v == 0 && mouse_report.h == 0)
 103:./tmk_core/common/mousekey.c ****         return;
 104:./tmk_core/common/mousekey.c **** 
 105:./tmk_core/common/mousekey.c ****     if (mousekey_repeat != UINT8_MAX)
 106:./tmk_core/common/mousekey.c ****         mousekey_repeat++;
 107:./tmk_core/common/mousekey.c **** 
 108:./tmk_core/common/mousekey.c **** 
 109:./tmk_core/common/mousekey.c ****     if (mouse_report.x > 0) mouse_report.x = move_unit();
 110:./tmk_core/common/mousekey.c ****     if (mouse_report.x < 0) mouse_report.x = move_unit() * -1;
 111:./tmk_core/common/mousekey.c ****     if (mouse_report.y > 0) mouse_report.y = move_unit();
 112:./tmk_core/common/mousekey.c ****     if (mouse_report.y < 0) mouse_report.y = move_unit() * -1;
 113:./tmk_core/common/mousekey.c **** 
 114:./tmk_core/common/mousekey.c ****     /* diagonal move [1/sqrt(2) = 0.7] */
 115:./tmk_core/common/mousekey.c ****     if (mouse_report.x && mouse_report.y) {
 116:./tmk_core/common/mousekey.c ****         mouse_report.x *= 0.7;
 117:./tmk_core/common/mousekey.c ****         mouse_report.y *= 0.7;
 118:./tmk_core/common/mousekey.c ****     }
 119:./tmk_core/common/mousekey.c **** 
 120:./tmk_core/common/mousekey.c ****     if (mouse_report.v > 0) mouse_report.v = wheel_unit();
 121:./tmk_core/common/mousekey.c ****     if (mouse_report.v < 0) mouse_report.v = wheel_unit() * -1;
 122:./tmk_core/common/mousekey.c ****     if (mouse_report.h > 0) mouse_report.h = wheel_unit();
 123:./tmk_core/common/mousekey.c ****     if (mouse_report.h < 0) mouse_report.h = wheel_unit() * -1;
 124:./tmk_core/common/mousekey.c **** 
 125:./tmk_core/common/mousekey.c ****     mousekey_send();
 126:./tmk_core/common/mousekey.c **** }
 127:./tmk_core/common/mousekey.c **** 
 128:./tmk_core/common/mousekey.c **** void mousekey_on(uint8_t code)
 129:./tmk_core/common/mousekey.c **** {
 221               		.loc 1 129 0
 222               		.cfi_startproc
 223               	.LVL19:
 224               	/* prologue: function */
 225               	/* frame size = 0 */
 226               	/* stack size = 0 */
 227               	.L__stack_usage = 0
 130:./tmk_core/common/mousekey.c ****     if      (code == KC_MS_UP)       mouse_report.y = move_unit() * -1;
 228               		.loc 1 130 0
 229 0000 803F      		cpi r24,lo8(-16)
 230 0002 01F4      		brne .L27
 231               		.loc 1 130 0 is_stmt 0 discriminator 1
 232 0004 0E94 0000 		call move_unit
 233               	.LVL20:
 234 0008 8195      		neg r24
 235 000a 00C0      		rjmp .L43
 236               	.LVL21:
 237               	.L27:
 131:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN)     mouse_report.y = move_unit();
 238               		.loc 1 131 0 is_stmt 1
 239 000c 813F      		cpi r24,lo8(-15)
 240 000e 01F4      		brne .L29
 241               		.loc 1 131 0 is_stmt 0 discriminator 1
 242 0010 0E94 0000 		call move_unit
 243               	.LVL22:
 244               	.L43:
 245 0014 8093 0000 		sts mouse_report+2,r24
 246 0018 0895      		ret
 247               	.LVL23:
 248               	.L29:
 132:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_LEFT)     mouse_report.x = move_unit() * -1;
 249               		.loc 1 132 0 is_stmt 1
 250 001a 823F      		cpi r24,lo8(-14)
 251 001c 01F4      		brne .L30
 252               		.loc 1 132 0 is_stmt 0 discriminator 1
 253 001e 0E94 0000 		call move_unit
 254               	.LVL24:
 255 0022 8195      		neg r24
 256 0024 00C0      		rjmp .L45
 257               	.LVL25:
 258               	.L30:
 133:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_RIGHT)    mouse_report.x = move_unit();
 259               		.loc 1 133 0 is_stmt 1
 260 0026 833F      		cpi r24,lo8(-13)
 261 0028 01F4      		brne .L31
 262               		.loc 1 133 0 is_stmt 0 discriminator 1
 263 002a 0E94 0000 		call move_unit
 264               	.LVL26:
 265               	.L45:
 266 002e 8093 0000 		sts mouse_report+1,r24
 267 0032 0895      		ret
 268               	.LVL27:
 269               	.L31:
 134:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_UP)    mouse_report.v = wheel_unit();
 270               		.loc 1 134 0 is_stmt 1
 271 0034 893F      		cpi r24,lo8(-7)
 272 0036 01F4      		brne .L32
 273               		.loc 1 134 0 is_stmt 0 discriminator 1
 274 0038 0E94 0000 		call wheel_unit
 275               	.LVL28:
 276 003c 00C0      		rjmp .L47
 277               	.LVL29:
 278               	.L32:
 135:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_DOWN)  mouse_report.v = wheel_unit() * -1;
 279               		.loc 1 135 0 is_stmt 1
 280 003e 8A3F      		cpi r24,lo8(-6)
 281 0040 01F4      		brne .L33
 282               		.loc 1 135 0 is_stmt 0 discriminator 1
 283 0042 0E94 0000 		call wheel_unit
 284               	.LVL30:
 285 0046 8195      		neg r24
 286               	.L47:
 287 0048 8093 0000 		sts mouse_report+3,r24
 288 004c 0895      		ret
 289               	.LVL31:
 290               	.L33:
 136:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_LEFT)  mouse_report.h = wheel_unit() * -1;
 291               		.loc 1 136 0 is_stmt 1
 292 004e 8B3F      		cpi r24,lo8(-5)
 293 0050 01F4      		brne .L34
 294               		.loc 1 136 0 is_stmt 0 discriminator 1
 295 0052 0E94 0000 		call wheel_unit
 296               	.LVL32:
 297 0056 8195      		neg r24
 298 0058 00C0      		rjmp .L48
 299               	.LVL33:
 300               	.L34:
 137:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_RIGHT) mouse_report.h = wheel_unit();
 301               		.loc 1 137 0 is_stmt 1
 302 005a 8C3F      		cpi r24,lo8(-4)
 303 005c 01F4      		brne .L35
 304               		.loc 1 137 0 is_stmt 0 discriminator 1
 305 005e 0E94 0000 		call wheel_unit
 306               	.LVL34:
 307               	.L48:
 308 0062 8093 0000 		sts mouse_report+4,r24
 309 0066 0895      		ret
 310               	.LVL35:
 311               	.L35:
 138:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN1)     mouse_report.buttons |= MOUSE_BTN1;
 312               		.loc 1 138 0 is_stmt 1
 313 0068 843F      		cpi r24,lo8(-12)
 314 006a 01F4      		brne .L36
 315               		.loc 1 138 0 is_stmt 0 discriminator 1
 316 006c 8091 0000 		lds r24,mouse_report
 317               	.LVL36:
 318 0070 8160      		ori r24,lo8(1)
 319 0072 00C0      		rjmp .L46
 320               	.LVL37:
 321               	.L36:
 139:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN2)     mouse_report.buttons |= MOUSE_BTN2;
 322               		.loc 1 139 0 is_stmt 1
 323 0074 853F      		cpi r24,lo8(-11)
 324 0076 01F4      		brne .L37
 325               		.loc 1 139 0 is_stmt 0 discriminator 1
 326 0078 8091 0000 		lds r24,mouse_report
 327               	.LVL38:
 328 007c 8260      		ori r24,lo8(2)
 329 007e 00C0      		rjmp .L46
 330               	.LVL39:
 331               	.L37:
 140:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3)     mouse_report.buttons |= MOUSE_BTN3;
 332               		.loc 1 140 0 is_stmt 1
 333 0080 863F      		cpi r24,lo8(-10)
 334 0082 01F4      		brne .L38
 335               		.loc 1 140 0 is_stmt 0 discriminator 1
 336 0084 8091 0000 		lds r24,mouse_report
 337               	.LVL40:
 338 0088 8460      		ori r24,lo8(4)
 339 008a 00C0      		rjmp .L46
 340               	.LVL41:
 341               	.L38:
 141:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4)     mouse_report.buttons |= MOUSE_BTN4;
 342               		.loc 1 141 0 is_stmt 1
 343 008c 873F      		cpi r24,lo8(-9)
 344 008e 01F4      		brne .L39
 345               		.loc 1 141 0 is_stmt 0 discriminator 1
 346 0090 8091 0000 		lds r24,mouse_report
 347               	.LVL42:
 348 0094 8860      		ori r24,lo8(8)
 349 0096 00C0      		rjmp .L46
 350               	.LVL43:
 351               	.L39:
 142:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5)     mouse_report.buttons |= MOUSE_BTN5;
 352               		.loc 1 142 0 is_stmt 1
 353 0098 883F      		cpi r24,lo8(-8)
 354 009a 01F4      		brne .L40
 355               		.loc 1 142 0 is_stmt 0 discriminator 1
 356 009c 8091 0000 		lds r24,mouse_report
 357               	.LVL44:
 358 00a0 8061      		ori r24,lo8(16)
 359               	.L46:
 360 00a2 8093 0000 		sts mouse_report,r24
 361 00a6 0895      		ret
 362               	.LVL45:
 363               	.L40:
 143:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL0)   mousekey_accel |= (1<<0);
 364               		.loc 1 143 0 is_stmt 1
 365 00a8 8D3F      		cpi r24,lo8(-3)
 366 00aa 01F4      		brne .L41
 367               		.loc 1 143 0 is_stmt 0 discriminator 1
 368 00ac 8091 0000 		lds r24,mousekey_accel
 369               	.LVL46:
 370 00b0 8160      		ori r24,lo8(1)
 371 00b2 00C0      		rjmp .L44
 372               	.LVL47:
 373               	.L41:
 144:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL1)   mousekey_accel |= (1<<1);
 374               		.loc 1 144 0 is_stmt 1
 375 00b4 8E3F      		cpi r24,lo8(-2)
 376 00b6 01F4      		brne .L42
 377               		.loc 1 144 0 is_stmt 0 discriminator 1
 378 00b8 8091 0000 		lds r24,mousekey_accel
 379               	.LVL48:
 380 00bc 8260      		ori r24,lo8(2)
 381 00be 00C0      		rjmp .L44
 382               	.LVL49:
 383               	.L42:
 145:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2)   mousekey_accel |= (1<<2);
 384               		.loc 1 145 0 is_stmt 1
 385 00c0 8F3F      		cpi r24,lo8(-1)
 386 00c2 01F4      		brne .L26
 387               		.loc 1 145 0 is_stmt 0 discriminator 1
 388 00c4 8091 0000 		lds r24,mousekey_accel
 389               	.LVL50:
 390 00c8 8460      		ori r24,lo8(4)
 391               	.L44:
 392 00ca 8093 0000 		sts mousekey_accel,r24
 393               	.L26:
 394 00ce 0895      		ret
 395               		.cfi_endproc
 396               	.LFE103:
 398               		.section	.text.mousekey_off,"ax",@progbits
 399               	.global	mousekey_off
 401               	mousekey_off:
 402               	.LFB104:
 146:./tmk_core/common/mousekey.c **** }
 147:./tmk_core/common/mousekey.c **** 
 148:./tmk_core/common/mousekey.c **** void mousekey_off(uint8_t code)
 149:./tmk_core/common/mousekey.c **** {
 403               		.loc 1 149 0 is_stmt 1
 404               		.cfi_startproc
 405               	.LVL51:
 406               	/* prologue: function */
 407               	/* frame size = 0 */
 408               	/* stack size = 0 */
 409               	.L__stack_usage = 0
 150:./tmk_core/common/mousekey.c ****     if      (code == KC_MS_UP       && mouse_report.y < 0) mouse_report.y = 0;
 410               		.loc 1 150 0
 411 0000 803F      		cpi r24,lo8(-16)
 412 0002 01F4      		brne .L50
 413               		.loc 1 150 0 is_stmt 0 discriminator 1
 414 0004 8091 0000 		lds r24,mouse_report+2
 415               	.LVL52:
 416 0008 87FF      		sbrs r24,7
 417 000a 00C0      		rjmp .L52
 418               	.L54:
 419 000c 1092 0000 		sts mouse_report+2,__zero_reg__
 420 0010 00C0      		rjmp .L52
 421               	.LVL53:
 422               	.L50:
 151:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN     && mouse_report.y > 0) mouse_report.y = 0;
 423               		.loc 1 151 0 is_stmt 1
 424 0012 813F      		cpi r24,lo8(-15)
 425 0014 01F4      		brne .L53
 426               		.loc 1 151 0 is_stmt 0 discriminator 1
 427 0016 8091 0000 		lds r24,mouse_report+2
 428               	.LVL54:
 429 001a 1816      		cp __zero_reg__,r24
 430 001c 04F0      		brlt .L54
 431 001e 00C0      		rjmp .L52
 432               	.LVL55:
 433               	.L53:
 434 0020 9091 0000 		lds r25,mouse_report+1
 152:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_LEFT     && mouse_report.x < 0) mouse_report.x = 0;
 435               		.loc 1 152 0 is_stmt 1
 436 0024 823F      		cpi r24,lo8(-14)
 437 0026 01F4      		brne .L55
 438               		.loc 1 152 0 is_stmt 0 discriminator 1
 439 0028 97FF      		sbrs r25,7
 440 002a 00C0      		rjmp .L52
 441               	.L58:
 442 002c 1092 0000 		sts mouse_report+1,__zero_reg__
 443 0030 00C0      		rjmp .L52
 444               	.L55:
 153:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_RIGHT    && mouse_report.x > 0) mouse_report.x = 0;
 445               		.loc 1 153 0 is_stmt 1
 446 0032 833F      		cpi r24,lo8(-13)
 447 0034 01F4      		brne .L57
 448               		.loc 1 153 0 is_stmt 0 discriminator 1
 449 0036 1916      		cp __zero_reg__,r25
 450 0038 04F0      		brlt .L58
 451 003a 00C0      		rjmp .L52
 452               	.L57:
 154:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_UP    && mouse_report.v > 0) mouse_report.v = 0;
 453               		.loc 1 154 0 is_stmt 1
 454 003c 893F      		cpi r24,lo8(-7)
 455 003e 01F4      		brne .L51
 456               		.loc 1 154 0 is_stmt 0 discriminator 1
 457 0040 8091 0000 		lds r24,mouse_report+3
 458               	.LVL56:
 459 0044 1816      		cp __zero_reg__,r24
 460 0046 04F0      		brlt .+2
 461 0048 00C0      		rjmp .L52
 462               	.L62:
 463 004a 1092 0000 		sts mouse_report+3,__zero_reg__
 464 004e 00C0      		rjmp .L52
 465               	.LVL57:
 466               	.L51:
 155:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_DOWN  && mouse_report.v < 0) mouse_report.v = 0;
 467               		.loc 1 155 0 is_stmt 1
 468 0050 8A3F      		cpi r24,lo8(-6)
 469 0052 01F4      		brne .L61
 470               		.loc 1 155 0 is_stmt 0 discriminator 1
 471 0054 8091 0000 		lds r24,mouse_report+3
 472               	.LVL58:
 473 0058 87FF      		sbrs r24,7
 474 005a 00C0      		rjmp .L52
 475 005c 00C0      		rjmp .L62
 476               	.LVL59:
 477               	.L61:
 156:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_LEFT  && mouse_report.h < 0) mouse_report.h = 0;
 478               		.loc 1 156 0 is_stmt 1
 479 005e 8B3F      		cpi r24,lo8(-5)
 480 0060 01F4      		brne .L56
 481               		.loc 1 156 0 is_stmt 0 discriminator 1
 482 0062 8091 0000 		lds r24,mouse_report+4
 483               	.LVL60:
 484 0066 87FF      		sbrs r24,7
 485 0068 00C0      		rjmp .L52
 486               	.L64:
 487 006a 1092 0000 		sts mouse_report+4,__zero_reg__
 488 006e 00C0      		rjmp .L52
 489               	.LVL61:
 490               	.L56:
 157:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_RIGHT && mouse_report.h > 0) mouse_report.h = 0;
 491               		.loc 1 157 0 is_stmt 1
 492 0070 8C3F      		cpi r24,lo8(-4)
 493 0072 01F4      		brne .L59
 494               		.loc 1 157 0 is_stmt 0 discriminator 1
 495 0074 8091 0000 		lds r24,mouse_report+4
 496               	.LVL62:
 497 0078 1816      		cp __zero_reg__,r24
 498 007a 04F0      		brlt .L64
 499 007c 00C0      		rjmp .L52
 500               	.LVL63:
 501               	.L59:
 158:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN1) mouse_report.buttons &= ~MOUSE_BTN1;
 502               		.loc 1 158 0 is_stmt 1
 503 007e 843F      		cpi r24,lo8(-12)
 504 0080 01F4      		brne .L60
 505               		.loc 1 158 0 is_stmt 0 discriminator 1
 506 0082 8091 0000 		lds r24,mouse_report
 507               	.LVL64:
 508 0086 8E7F      		andi r24,lo8(-2)
 509 0088 00C0      		rjmp .L72
 510               	.LVL65:
 511               	.L60:
 159:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN2) mouse_report.buttons &= ~MOUSE_BTN2;
 512               		.loc 1 159 0 is_stmt 1
 513 008a 853F      		cpi r24,lo8(-11)
 514 008c 01F4      		brne .L63
 515               		.loc 1 159 0 is_stmt 0 discriminator 1
 516 008e 8091 0000 		lds r24,mouse_report
 517               	.LVL66:
 518 0092 8D7F      		andi r24,lo8(-3)
 519 0094 00C0      		rjmp .L72
 520               	.LVL67:
 521               	.L63:
 160:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3) mouse_report.buttons &= ~MOUSE_BTN3;
 522               		.loc 1 160 0 is_stmt 1
 523 0096 863F      		cpi r24,lo8(-10)
 524 0098 01F4      		brne .L65
 525               		.loc 1 160 0 is_stmt 0 discriminator 1
 526 009a 8091 0000 		lds r24,mouse_report
 527               	.LVL68:
 528 009e 8B7F      		andi r24,lo8(-5)
 529 00a0 00C0      		rjmp .L72
 530               	.LVL69:
 531               	.L65:
 161:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4) mouse_report.buttons &= ~MOUSE_BTN4;
 532               		.loc 1 161 0 is_stmt 1
 533 00a2 873F      		cpi r24,lo8(-9)
 534 00a4 01F4      		brne .L66
 535               		.loc 1 161 0 is_stmt 0 discriminator 1
 536 00a6 8091 0000 		lds r24,mouse_report
 537               	.LVL70:
 538 00aa 877F      		andi r24,lo8(-9)
 539 00ac 00C0      		rjmp .L72
 540               	.LVL71:
 541               	.L66:
 162:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5) mouse_report.buttons &= ~MOUSE_BTN5;
 542               		.loc 1 162 0 is_stmt 1
 543 00ae 883F      		cpi r24,lo8(-8)
 544 00b0 01F4      		brne .L67
 545               		.loc 1 162 0 is_stmt 0 discriminator 1
 546 00b2 8091 0000 		lds r24,mouse_report
 547               	.LVL72:
 548 00b6 8F7E      		andi r24,lo8(-17)
 549               	.L72:
 550 00b8 8093 0000 		sts mouse_report,r24
 551 00bc 00C0      		rjmp .L52
 552               	.LVL73:
 553               	.L67:
 163:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL0) mousekey_accel &= ~(1<<0);
 554               		.loc 1 163 0 is_stmt 1
 555 00be 8D3F      		cpi r24,lo8(-3)
 556 00c0 01F4      		brne .L68
 557               		.loc 1 163 0 is_stmt 0 discriminator 1
 558 00c2 8091 0000 		lds r24,mousekey_accel
 559               	.LVL74:
 560 00c6 8E7F      		andi r24,lo8(-2)
 561 00c8 00C0      		rjmp .L71
 562               	.LVL75:
 563               	.L68:
 164:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL1) mousekey_accel &= ~(1<<1);
 564               		.loc 1 164 0 is_stmt 1
 565 00ca 8E3F      		cpi r24,lo8(-2)
 566 00cc 01F4      		brne .L69
 567               		.loc 1 164 0 is_stmt 0 discriminator 1
 568 00ce 8091 0000 		lds r24,mousekey_accel
 569               	.LVL76:
 570 00d2 8D7F      		andi r24,lo8(-3)
 571 00d4 00C0      		rjmp .L71
 572               	.LVL77:
 573               	.L69:
 165:./tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2) mousekey_accel &= ~(1<<2);
 574               		.loc 1 165 0 is_stmt 1
 575 00d6 8F3F      		cpi r24,lo8(-1)
 576 00d8 01F4      		brne .L52
 577               		.loc 1 165 0 is_stmt 0 discriminator 1
 578 00da 8091 0000 		lds r24,mousekey_accel
 579               	.LVL78:
 580 00de 8B7F      		andi r24,lo8(-5)
 581               	.L71:
 582 00e0 8093 0000 		sts mousekey_accel,r24
 583               	.L52:
 166:./tmk_core/common/mousekey.c **** 
 167:./tmk_core/common/mousekey.c ****     if (mouse_report.x == 0 && mouse_report.y == 0 && mouse_report.v == 0 && mouse_report.h == 0)
 584               		.loc 1 167 0 is_stmt 1
 585 00e4 8091 0000 		lds r24,mouse_report+1
 586 00e8 8111      		cpse r24,__zero_reg__
 587 00ea 00C0      		rjmp .L49
 588               		.loc 1 167 0 is_stmt 0 discriminator 1
 589 00ec 8091 0000 		lds r24,mouse_report+2
 590 00f0 8111      		cpse r24,__zero_reg__
 591 00f2 00C0      		rjmp .L49
 592 00f4 8091 0000 		lds r24,mouse_report+3
 593 00f8 8111      		cpse r24,__zero_reg__
 594 00fa 00C0      		rjmp .L49
 595 00fc 8091 0000 		lds r24,mouse_report+4
 596 0100 8111      		cpse r24,__zero_reg__
 597 0102 00C0      		rjmp .L49
 168:./tmk_core/common/mousekey.c ****         mousekey_repeat = 0;
 598               		.loc 1 168 0 is_stmt 1
 599 0104 1092 0000 		sts mousekey_repeat,__zero_reg__
 600               	.L49:
 601 0108 0895      		ret
 602               		.cfi_endproc
 603               	.LFE104:
 605               		.section	.text.mousekey_send,"ax",@progbits
 606               	.global	mousekey_send
 608               	mousekey_send:
 609               	.LFB105:
 169:./tmk_core/common/mousekey.c **** }
 170:./tmk_core/common/mousekey.c **** 
 171:./tmk_core/common/mousekey.c **** void mousekey_send(void)
 172:./tmk_core/common/mousekey.c **** {
 610               		.loc 1 172 0
 611               		.cfi_startproc
 612               	/* prologue: function */
 613               	/* frame size = 0 */
 614               	/* stack size = 0 */
 615               	.L__stack_usage = 0
 173:./tmk_core/common/mousekey.c ****     mousekey_debug();
 174:./tmk_core/common/mousekey.c ****     host_mouse_send(&mouse_report);
 616               		.loc 1 174 0
 617 0000 80E0      		ldi r24,lo8(mouse_report)
 618 0002 90E0      		ldi r25,hi8(mouse_report)
 619 0004 0E94 0000 		call host_mouse_send
 620               	.LVL79:
 175:./tmk_core/common/mousekey.c ****     last_timer = timer_read();
 621               		.loc 1 175 0
 622 0008 0E94 0000 		call timer_read
 623               	.LVL80:
 624 000c 9093 0000 		sts last_timer+1,r25
 625 0010 8093 0000 		sts last_timer,r24
 626 0014 0895      		ret
 627               		.cfi_endproc
 628               	.LFE105:
 630               	.global	__floatsisf
 631               	.global	__mulsf3
 632               	.global	__fixsfsi
 633               		.section	.text.mousekey_task,"ax",@progbits
 634               	.global	mousekey_task
 636               	mousekey_task:
 637               	.LFB102:
  98:./tmk_core/common/mousekey.c ****     if (timer_elapsed(last_timer) < (mousekey_repeat ? mk_interval : mk_delay*10))
 638               		.loc 1 98 0
 639               		.cfi_startproc
 640 0000 1F93      		push r17
 641               	.LCFI0:
 642               		.cfi_def_cfa_offset 3
 643               		.cfi_offset 17, -2
 644 0002 CF93      		push r28
 645               	.LCFI1:
 646               		.cfi_def_cfa_offset 4
 647               		.cfi_offset 28, -3
 648 0004 DF93      		push r29
 649               	.LCFI2:
 650               		.cfi_def_cfa_offset 5
 651               		.cfi_offset 29, -4
 652               	/* prologue: function */
 653               	/* frame size = 0 */
 654               	/* stack size = 3 */
 655               	.L__stack_usage = 3
  99:./tmk_core/common/mousekey.c ****         return;
 656               		.loc 1 99 0
 657 0006 8091 0000 		lds r24,last_timer
 658 000a 9091 0000 		lds r25,last_timer+1
 659 000e 0E94 0000 		call timer_elapsed
 660               	.LVL81:
 661 0012 4091 0000 		lds r20,mousekey_repeat
 662 0016 4423      		tst r20
 663 0018 01F0      		breq .L75
  99:./tmk_core/common/mousekey.c ****         return;
 664               		.loc 1 99 0 is_stmt 0 discriminator 1
 665 001a 2091 0000 		lds r18,mk_interval
 666 001e 30E0      		ldi r19,0
 667 0020 00C0      		rjmp .L76
 668               	.L75:
  99:./tmk_core/common/mousekey.c ****         return;
 669               		.loc 1 99 0 discriminator 2
 670 0022 2091 0000 		lds r18,mk_delay
 671 0026 5AE0      		ldi r21,lo8(10)
 672 0028 259F      		mul r18,r21
 673 002a 9001      		movw r18,r0
 674 002c 1124      		clr __zero_reg__
 675               	.L76:
  99:./tmk_core/common/mousekey.c ****         return;
 676               		.loc 1 99 0 discriminator 3
 677 002e 8217      		cp r24,r18
 678 0030 9307      		cpc r25,r19
 679 0032 00F4      		brsh .+2
 680 0034 00C0      		rjmp .L74
 102:./tmk_core/common/mousekey.c ****         return;
 681               		.loc 1 102 0 is_stmt 1
 682 0036 8091 0000 		lds r24,mouse_report+1
 683 003a 1091 0000 		lds r17,mouse_report+2
 684 003e D091 0000 		lds r29,mouse_report+3
 685 0042 C091 0000 		lds r28,mouse_report+4
 686 0046 8111      		cpse r24,__zero_reg__
 687 0048 00C0      		rjmp .L78
 102:./tmk_core/common/mousekey.c ****         return;
 688               		.loc 1 102 0 is_stmt 0 discriminator 1
 689 004a 1111      		cpse r17,__zero_reg__
 690 004c 00C0      		rjmp .L78
 691 004e D111      		cpse r29,__zero_reg__
 692 0050 00C0      		rjmp .L78
 693 0052 CC23      		tst r28
 694 0054 01F4      		brne .+2
 695 0056 00C0      		rjmp .L74
 696               	.L78:
 105:./tmk_core/common/mousekey.c ****         mousekey_repeat++;
 697               		.loc 1 105 0 is_stmt 1
 698 0058 4F3F      		cpi r20,lo8(-1)
 699 005a 01F0      		breq .L79
 106:./tmk_core/common/mousekey.c **** 
 700               		.loc 1 106 0
 701 005c 4F5F      		subi r20,lo8(-(1))
 702 005e 4093 0000 		sts mousekey_repeat,r20
 703               	.L79:
 109:./tmk_core/common/mousekey.c ****     if (mouse_report.x < 0) mouse_report.x = move_unit() * -1;
 704               		.loc 1 109 0
 705 0062 1816      		cp __zero_reg__,r24
 706 0064 04F4      		brge .L80
 109:./tmk_core/common/mousekey.c ****     if (mouse_report.x < 0) mouse_report.x = move_unit() * -1;
 707               		.loc 1 109 0 is_stmt 0 discriminator 1
 708 0066 0E94 0000 		call move_unit
 709               	.LVL82:
 710 006a 8093 0000 		sts mouse_report+1,r24
 711               	.L80:
 110:./tmk_core/common/mousekey.c ****     if (mouse_report.y > 0) mouse_report.y = move_unit();
 712               		.loc 1 110 0 is_stmt 1
 713 006e 8091 0000 		lds r24,mouse_report+1
 714 0072 87FF      		sbrs r24,7
 715 0074 00C0      		rjmp .L81
 110:./tmk_core/common/mousekey.c ****     if (mouse_report.y > 0) mouse_report.y = move_unit();
 716               		.loc 1 110 0 is_stmt 0 discriminator 1
 717 0076 0E94 0000 		call move_unit
 718               	.LVL83:
 719 007a 8195      		neg r24
 720 007c 8093 0000 		sts mouse_report+1,r24
 721               	.L81:
 111:./tmk_core/common/mousekey.c ****     if (mouse_report.y < 0) mouse_report.y = move_unit() * -1;
 722               		.loc 1 111 0 is_stmt 1
 723 0080 1116      		cp __zero_reg__,r17
 724 0082 04F4      		brge .L82
 111:./tmk_core/common/mousekey.c ****     if (mouse_report.y < 0) mouse_report.y = move_unit() * -1;
 725               		.loc 1 111 0 is_stmt 0 discriminator 1
 726 0084 0E94 0000 		call move_unit
 727               	.LVL84:
 728 0088 8093 0000 		sts mouse_report+2,r24
 729               	.L82:
 112:./tmk_core/common/mousekey.c **** 
 730               		.loc 1 112 0 is_stmt 1
 731 008c 8091 0000 		lds r24,mouse_report+2
 732 0090 87FF      		sbrs r24,7
 733 0092 00C0      		rjmp .L83
 112:./tmk_core/common/mousekey.c **** 
 734               		.loc 1 112 0 is_stmt 0 discriminator 1
 735 0094 0E94 0000 		call move_unit
 736               	.LVL85:
 737 0098 8195      		neg r24
 738 009a 8093 0000 		sts mouse_report+2,r24
 739               	.L83:
 115:./tmk_core/common/mousekey.c ****         mouse_report.x *= 0.7;
 740               		.loc 1 115 0 is_stmt 1
 741 009e 6091 0000 		lds r22,mouse_report+1
 742 00a2 6623      		tst r22
 743 00a4 01F0      		breq .L84
 115:./tmk_core/common/mousekey.c ****         mouse_report.x *= 0.7;
 744               		.loc 1 115 0 is_stmt 0 discriminator 1
 745 00a6 1091 0000 		lds r17,mouse_report+2
 746 00aa 1123      		tst r17
 747 00ac 01F0      		breq .L84
 116:./tmk_core/common/mousekey.c ****         mouse_report.y *= 0.7;
 748               		.loc 1 116 0 is_stmt 1
 749 00ae 7727      		clr r23
 750 00b0 67FD      		sbrc r22,7
 751 00b2 7095      		com r23
 752 00b4 872F      		mov r24,r23
 753 00b6 972F      		mov r25,r23
 754 00b8 0E94 0000 		call __floatsisf
 755               	.LVL86:
 756 00bc 23E3      		ldi r18,lo8(51)
 757 00be 33E3      		ldi r19,lo8(51)
 758 00c0 43E3      		ldi r20,lo8(51)
 759 00c2 5FE3      		ldi r21,lo8(63)
 760 00c4 0E94 0000 		call __mulsf3
 761               	.LVL87:
 762 00c8 0E94 0000 		call __fixsfsi
 763               	.LVL88:
 764 00cc 6093 0000 		sts mouse_report+1,r22
 117:./tmk_core/common/mousekey.c ****     }
 765               		.loc 1 117 0
 766 00d0 612F      		mov r22,r17
 767 00d2 7727      		clr r23
 768 00d4 67FD      		sbrc r22,7
 769 00d6 7095      		com r23
 770 00d8 872F      		mov r24,r23
 771 00da 972F      		mov r25,r23
 772 00dc 0E94 0000 		call __floatsisf
 773               	.LVL89:
 774 00e0 23E3      		ldi r18,lo8(51)
 775 00e2 33E3      		ldi r19,lo8(51)
 776 00e4 43E3      		ldi r20,lo8(51)
 777 00e6 5FE3      		ldi r21,lo8(63)
 778 00e8 0E94 0000 		call __mulsf3
 779               	.LVL90:
 780 00ec 0E94 0000 		call __fixsfsi
 781               	.LVL91:
 782 00f0 6093 0000 		sts mouse_report+2,r22
 783               	.L84:
 120:./tmk_core/common/mousekey.c ****     if (mouse_report.v < 0) mouse_report.v = wheel_unit() * -1;
 784               		.loc 1 120 0
 785 00f4 1D16      		cp __zero_reg__,r29
 786 00f6 04F4      		brge .L85
 120:./tmk_core/common/mousekey.c ****     if (mouse_report.v < 0) mouse_report.v = wheel_unit() * -1;
 787               		.loc 1 120 0 is_stmt 0 discriminator 1
 788 00f8 0E94 0000 		call wheel_unit
 789               	.LVL92:
 790 00fc 8093 0000 		sts mouse_report+3,r24
 791               	.L85:
 121:./tmk_core/common/mousekey.c ****     if (mouse_report.h > 0) mouse_report.h = wheel_unit();
 792               		.loc 1 121 0 is_stmt 1
 793 0100 8091 0000 		lds r24,mouse_report+3
 794 0104 87FF      		sbrs r24,7
 795 0106 00C0      		rjmp .L86
 121:./tmk_core/common/mousekey.c ****     if (mouse_report.h > 0) mouse_report.h = wheel_unit();
 796               		.loc 1 121 0 is_stmt 0 discriminator 1
 797 0108 0E94 0000 		call wheel_unit
 798               	.LVL93:
 799 010c 8195      		neg r24
 800 010e 8093 0000 		sts mouse_report+3,r24
 801               	.L86:
 122:./tmk_core/common/mousekey.c ****     if (mouse_report.h < 0) mouse_report.h = wheel_unit() * -1;
 802               		.loc 1 122 0 is_stmt 1
 803 0112 1C16      		cp __zero_reg__,r28
 804 0114 04F4      		brge .L87
 122:./tmk_core/common/mousekey.c ****     if (mouse_report.h < 0) mouse_report.h = wheel_unit() * -1;
 805               		.loc 1 122 0 is_stmt 0 discriminator 1
 806 0116 0E94 0000 		call wheel_unit
 807               	.LVL94:
 808 011a 8093 0000 		sts mouse_report+4,r24
 809               	.L87:
 123:./tmk_core/common/mousekey.c **** 
 810               		.loc 1 123 0 is_stmt 1
 811 011e 8091 0000 		lds r24,mouse_report+4
 812 0122 87FF      		sbrs r24,7
 813 0124 00C0      		rjmp .L88
 123:./tmk_core/common/mousekey.c **** 
 814               		.loc 1 123 0 is_stmt 0 discriminator 1
 815 0126 0E94 0000 		call wheel_unit
 816               	.LVL95:
 817 012a 8195      		neg r24
 818 012c 8093 0000 		sts mouse_report+4,r24
 819               	.L88:
 820               	/* epilogue start */
 126:./tmk_core/common/mousekey.c **** 
 821               		.loc 1 126 0 is_stmt 1
 822 0130 DF91      		pop r29
 823 0132 CF91      		pop r28
 824 0134 1F91      		pop r17
 125:./tmk_core/common/mousekey.c **** }
 825               		.loc 1 125 0
 826 0136 0C94 0000 		jmp mousekey_send
 827               	.LVL96:
 828               	.L74:
 829               	/* epilogue start */
 126:./tmk_core/common/mousekey.c **** 
 830               		.loc 1 126 0
 831 013a DF91      		pop r29
 832 013c CF91      		pop r28
 833 013e 1F91      		pop r17
 834 0140 0895      		ret
 835               		.cfi_endproc
 836               	.LFE102:
 838               		.section	.text.mousekey_clear,"ax",@progbits
 839               	.global	mousekey_clear
 841               	mousekey_clear:
 842               	.LFB106:
 176:./tmk_core/common/mousekey.c **** }
 177:./tmk_core/common/mousekey.c **** 
 178:./tmk_core/common/mousekey.c **** void mousekey_clear(void)
 179:./tmk_core/common/mousekey.c **** {
 843               		.loc 1 179 0
 844               		.cfi_startproc
 845               	/* prologue: function */
 846               	/* frame size = 0 */
 847               	/* stack size = 0 */
 848               	.L__stack_usage = 0
 180:./tmk_core/common/mousekey.c ****     mouse_report = (report_mouse_t){};
 849               		.loc 1 180 0
 850 0000 E0E0      		ldi r30,lo8(mouse_report)
 851 0002 F0E0      		ldi r31,hi8(mouse_report)
 852 0004 85E0      		ldi r24,lo8(5)
 853 0006 DF01      		movw r26,r30
 854               		0:
 855 0008 1D92      		st X+,__zero_reg__
 856 000a 8A95      		dec r24
 857 000c 01F4      		brne 0b
 181:./tmk_core/common/mousekey.c ****     mousekey_repeat = 0;
 858               		.loc 1 181 0
 859 000e 1092 0000 		sts mousekey_repeat,__zero_reg__
 182:./tmk_core/common/mousekey.c ****     mousekey_accel = 0;
 860               		.loc 1 182 0
 861 0012 1092 0000 		sts mousekey_accel,__zero_reg__
 862 0016 0895      		ret
 863               		.cfi_endproc
 864               	.LFE106:
 866               		.section	.bss.last_timer,"aw",@nobits
 869               	last_timer:
 870 0000 0000      		.zero	2
 871               	.global	mk_wheel_time_to_max
 872               		.section	.data.mk_wheel_time_to_max,"aw",@progbits
 875               	mk_wheel_time_to_max:
 876 0000 28        		.byte	40
 877               	.global	mk_wheel_max_speed
 878               		.section	.data.mk_wheel_max_speed,"aw",@progbits
 881               	mk_wheel_max_speed:
 882 0000 08        		.byte	8
 883               	.global	mk_time_to_max
 884               		.section	.data.mk_time_to_max,"aw",@progbits
 887               	mk_time_to_max:
 888 0000 14        		.byte	20
 889               	.global	mk_max_speed
 890               		.section	.data.mk_max_speed,"aw",@progbits
 893               	mk_max_speed:
 894 0000 0A        		.byte	10
 895               	.global	mk_interval
 896               		.section	.data.mk_interval,"aw",@progbits
 899               	mk_interval:
 900 0000 32        		.byte	50
 901               	.global	mk_delay
 902               		.section	.data.mk_delay,"aw",@progbits
 905               	mk_delay:
 906 0000 1E        		.byte	30
 907               		.section	.bss.mousekey_accel,"aw",@nobits
 910               	mousekey_accel:
 911 0000 00        		.zero	1
 912               		.section	.bss.mousekey_repeat,"aw",@nobits
 915               	mousekey_repeat:
 916 0000 00        		.zero	1
 917               		.section	.bss.mouse_report,"aw",@nobits
 920               	mouse_report:
 921 0000 0000 0000 		.zero	5
 921      00
 922               		.text
 923               	.Letext0:
 924               		.file 2 "c:\\users\\james\\mhv_avr\\avr\\include\\stdint.h"
 925               		.file 3 "./tmk_core/common/report.h"
 926               		.file 4 "./tmk_core/common/debug.h"
 927               		.file 5 "./tmk_core/protocol/lufa/LUFA-git/LUFA/Drivers/USB/Core/USBTask.h"
 928               		.file 6 "./tmk_core/common/host.h"
 929               		.file 7 "./tmk_core/common/timer.h"
 930               		.file 8 "./tmk_core/common/keycode.h"
DEFINED SYMBOLS
                            *ABS*:00000000 mousekey.c
C:\Users\James\AppData\Local\Temp\ccwvdC1Q.s:2      *ABS*:0000003e __SP_H__
C:\Users\James\AppData\Local\Temp\ccwvdC1Q.s:3      *ABS*:0000003d __SP_L__
C:\Users\James\AppData\Local\Temp\ccwvdC1Q.s:4      *ABS*:0000003f __SREG__
C:\Users\James\AppData\Local\Temp\ccwvdC1Q.s:5      *ABS*:00000000 __tmp_reg__
C:\Users\James\AppData\Local\Temp\ccwvdC1Q.s:6      *ABS*:00000001 __zero_reg__
C:\Users\James\AppData\Local\Temp\ccwvdC1Q.s:12     .text.move_unit:00000000 move_unit
C:\Users\James\AppData\Local\Temp\ccwvdC1Q.s:910    .bss.mousekey_accel:00000000 mousekey_accel
C:\Users\James\AppData\Local\Temp\ccwvdC1Q.s:893    .data.mk_max_speed:00000000 mk_max_speed
C:\Users\James\AppData\Local\Temp\ccwvdC1Q.s:915    .bss.mousekey_repeat:00000000 mousekey_repeat
C:\Users\James\AppData\Local\Temp\ccwvdC1Q.s:887    .data.mk_time_to_max:00000000 mk_time_to_max
C:\Users\James\AppData\Local\Temp\ccwvdC1Q.s:123    .text.wheel_unit:00000000 wheel_unit
C:\Users\James\AppData\Local\Temp\ccwvdC1Q.s:881    .data.mk_wheel_max_speed:00000000 mk_wheel_max_speed
C:\Users\James\AppData\Local\Temp\ccwvdC1Q.s:875    .data.mk_wheel_time_to_max:00000000 mk_wheel_time_to_max
C:\Users\James\AppData\Local\Temp\ccwvdC1Q.s:219    .text.mousekey_on:00000000 mousekey_on
C:\Users\James\AppData\Local\Temp\ccwvdC1Q.s:920    .bss.mouse_report:00000000 mouse_report
C:\Users\James\AppData\Local\Temp\ccwvdC1Q.s:401    .text.mousekey_off:00000000 mousekey_off
C:\Users\James\AppData\Local\Temp\ccwvdC1Q.s:608    .text.mousekey_send:00000000 mousekey_send
C:\Users\James\AppData\Local\Temp\ccwvdC1Q.s:869    .bss.last_timer:00000000 last_timer
C:\Users\James\AppData\Local\Temp\ccwvdC1Q.s:636    .text.mousekey_task:00000000 mousekey_task
C:\Users\James\AppData\Local\Temp\ccwvdC1Q.s:899    .data.mk_interval:00000000 mk_interval
C:\Users\James\AppData\Local\Temp\ccwvdC1Q.s:905    .data.mk_delay:00000000 mk_delay
C:\Users\James\AppData\Local\Temp\ccwvdC1Q.s:841    .text.mousekey_clear:00000000 mousekey_clear

UNDEFINED SYMBOLS
__divmodhi4
host_mouse_send
timer_read
__floatsisf
__mulsf3
__fixsfsi
timer_elapsed
__do_copy_data
__do_clear_bss
